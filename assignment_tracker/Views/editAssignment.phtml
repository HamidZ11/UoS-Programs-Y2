<?php require 'Views/template/header.phtml'; ?>

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-100 px-4">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-xl p-8 transform transition-all hover:shadow-2xl hover:scale-[1.02] duration-300">
        <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center">‚úèÔ∏è Edit Assignment</h1>
        <p class="text-center text-gray-500 mb-8 text-sm">Update your assignment details below to keep things on track and organized.</p>

        <form method="POST" action="index.php?action=edit&id=<?= $assignment['id']; ?>" enctype="multipart/form-data">
            <div class="mb-6">
                <label for="module" class="block text-gray-700 font-medium mb-2">Module:</label>
                <input type="text" id="module" name="module" class="w-full border border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition"
                       value="<?= htmlspecialchars($assignment['module']); ?>" required>
            </div>

            <div class="mb-6">
                <label for="title" class="block text-gray-700 font-medium mb-2">Title:</label>
                <input type="text" id="title" name="title" class="w-full border border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition"
                       value="<?= htmlspecialchars($assignment['title']); ?>" required>
            </div>

            <div class="mb-6">
                <label for="description" class="block text-gray-700 font-medium mb-2">Description:</label>
                <textarea id="description" name="description" rows="3" class="w-full border border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition"><?= htmlspecialchars($assignment['description']); ?></textarea>
            </div>

            <div class="mb-6">
                <label for="brief" class="block text-gray-700 font-medium mb-2">Upload Brief (PDF):</label>
                <input type="file" id="brief" name="brief" accept="application/pdf"
                       class="w-full border border-gray-200 rounded-lg px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-400 transition">
                <?php if (!empty($assignment['brief'])): ?>
                    <p class="mt-2 text-sm text-gray-600">
                        Current file:
                        <a href="<?= htmlspecialchars($assignment['brief']); ?>" target="_blank" class="text-indigo-600 hover:text-indigo-800 font-medium">View PDF</a>
                    </p>
                <?php endif; ?>
                <p class="text-xs text-gray-500 mt-1">Upload a new file to replace the current one.</p>
            </div>

            <div class="mb-6">
                <label for="due_date" class="block text-gray-700 font-medium mb-2">Due Date:</label>
                <input id="due_date" name="due_date" type="text"
                       class="w-full rounded-lg border border-gray-200 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition"
                       placeholder="Select date"
                       value="<?= htmlspecialchars($assignment['due_date']); ?>" required>
            </div>

            <div class="mb-8">
                <label for="status" class="block text-gray-700 font-medium mb-2">Status:</label>
                <select id="status" name="status" class="w-full border border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition">
                    <option value="To Do" <?= $assignment['status'] === 'To Do' ? 'selected' : ''; ?>>To Do</option>
                    <option value="In Progress" <?= $assignment['status'] === 'In Progress' ? 'selected' : ''; ?>>In Progress</option>
                    <option value="Done" <?= $assignment['status'] === 'Done' ? 'selected' : ''; ?>>Done</option>
                </select>
            </div>

            <div class="flex space-x-4 justify-center">
                <button type="submit" class="bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold rounded-lg px-6 py-2 transition transform hover:scale-[1.05] focus:outline-none focus:ring-4 focus:ring-indigo-300">üíæ Update Assignment</button>
                <a href="index.php" class="bg-gradient-to-r from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500 text-gray-800 rounded-lg px-6 py-2 transition transform hover:scale-[1.05] flex items-center justify-center focus:outline-none focus:ring-4 focus:ring-gray-300">Cancel</a>
            </div>
        </form>
    </div>
</div>

<!-- Flatpickr -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    flatpickr("#due_date", {
        dateFormat: "d/m/Y",
        altInput: true,
        altFormat: "F j, Y",
        allowInput: true,
        minDate: "today", // ‚õî Prevents selecting past dates
        defaultDate: "<?= htmlspecialchars($assignment['due_date']); ?>"
    });
});
</script>

<?php require 'Views/template/footer.phtml'; ?>